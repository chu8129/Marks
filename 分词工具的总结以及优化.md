### 关于hannlp

```
原因：由于hanlpv2-large-albert的效率，想看看有没有优化手段；目前看来只能优化加载以及预测的过程，但过程逻辑比较精简，希望不大

关于分词：目前发现，几大分词，比较倾向hanlp
重点看了分词的tokenizer，
  使用的是公开的https://storage.googleapis.com/albert_models/albert_base_zh.tar.gz
  fit自己的预料，data/cws/large/all.txt
  参数耐心找会发现的～
```

```
代码中，各个模型的地址ALL，是运行时加载的，关键字:exec
```

```
加载large-albert流程
save_dir https://file.hankcs.com/hanlp/cws/large_cws_albert_base_20200828_011451.zip
metapath /Users/qw/.hanlp/cws/large_cws_albert_base_20200828_011451/meta.json
meta {'class_path': 'hanlp.components.tok.TransformerTokenizer', 'hanlp_version': '2.0.0-alpha.50'}
cls hanlp.components.tok.TransformerTokenizer
load config.json
>>>
```

---

### 一些想法以及结论

```
总感觉百度的分词，比较依赖词性，例如喜茶、抖音、带货、直播间，但实事求是，总体覆盖，两个人两轮标注，百度最高(新媒体素材、硬广、微博数据)
hanlp，在人工抽查的错误集中表现良好(比较关注品牌以及热词)，由于是albert，qps。。。cpu，懂的

面壁反思了一下，目前的目标是，网络常用语尽量划分为单个且不会太长，故train-data为新媒体较好；
原则上pkuseg-crf会更合适，但从词性来说，百度没有问题，选择问题

按leader的tips，百度会有长词出现
  个人猜测：可能原因是ner的问题，ccs采用的是ner结果非最短词(PER/LOC/ORG/TIME，注意百度的分词有两种包，lac和paddlehub，结果是不同的)，待测试

```

---
### 计划

```
1 由于热词需要经常更新，模型也需要经常迭代，故需要经常更新分词并且是无监督类型，ccs拥有10^10的新媒体素材，计划自行跑一遍试试；
2 词性训练数据问题，各大工具有自己的训练库，这才是最宝贵的东西～；看看有没有参与的可能；

```

---

### 一些记录

|      函数      |                       结果                      |        import时间        |
|----------------|-------------------------------------------------|--------------------|
|   jieba_pack   |  雅姿/仙草/气色/锁/水面/膜/让/小/仙女们/美美/哒 | 2.0544190406799316 |
| baidu_lac_pack |   雅姿/仙草/气色/锁/水/面膜/让/小仙女们/美美哒  | 9.018001079559326  |
| baidu_hub_pack |  雅姿/仙草/气色/锁/水/面膜/让/小仙女们/美美/哒  | 1.924940824508667  |
|  pkuseg_pack   |  雅姿/仙草/气色/锁/水面/膜/让/小/仙女们/美美/哒 | 12.574051856994629 |
|  thulac_pack   |  雅姿仙/草气/色/锁/水面/膜/让/小仙女/们/美美/哒 | 2.621137857437134  |
|     ltp40      |  雅姿/仙草/气色/锁/水/面膜/让/小/仙女/们/美美哒 | 13.474219799041748 |
|   hanlp_pku    | 雅姿/仙草/气/色锁/水面膜/让/小/仙女/们/美/美/哒 | 2.388430118560791  |
|  hanlp_albert  |  雅姿/仙草/气色/锁水/面膜/让/小/仙女们/美美/哒  | 5.468364715576172  |


|      函数      |                                                               结果                                                               |        import时间        |
|----------------|----------------------------------------------------------------------------------------------------------------------------------|--------------------|
|   jieba_pack   |  29/岁/喜/茶/创始人/聂云宸/登上/深圳/富豪/百人/榜/，/我们/一/起来/看看/他/的/人生/逆袭/之路/#/喜茶/#/深圳/#/创业/@/抖音/小/助手  | 2.4759151935577393 |
| baidu_lac_pack |     29岁/喜/茶/创始人/聂云宸/登上/深圳/富豪/百人/榜/，/我们/一起来/看看/他/的/人生逆袭之路#喜茶#/深圳/#/创业/@/抖/音/小助手      |  9.42107105255127  |
| baidu_hub_pack |   29岁/喜茶/创始人/聂云宸/登上/深圳/富豪/百人/榜/，/我们/一起来/看看/他/的/人生/逆袭/之路/#/喜/茶/#/深圳/#/创业/@/抖/音/小助手   | 2.0757460594177246 |
|  pkuseg_pack   | 29/岁/喜/茶/创始人/聂云宸/登/上/深圳/富豪/百人榜/，/我们/一起/来/看看/他/的/人生/逆袭/之/路/#/喜茶/#/深圳/#/创业/@/抖音/小/助手  | 14.12120771408081  |
|  thulac_pack   | 29/岁/喜茶/创始人/聂云宸/登/上/深圳/富豪/百/人/榜/，/我们/一起/来/看看/他/的/人生/逆袭/之/路/#/喜茶/#/深圳/#/创业/@/抖音/小/助手 | 2.7273480892181396 |
|     ltp40      | 29/岁/喜茶/创始人/聂云宸/登/上/深圳/富豪/百人/榜/，/我们/一起/来/看看/他/的/人生/逆袭/之/路/#/喜茶/#/深圳/#/创业/@/抖音/小/助手  | 14.330671072006226 |
|   hanlp_pku    | 29/岁/喜茶/创始人/聂云宸/登上/深圳/富豪/百/人/榜/，/我们/一起/来/看看/他/的/人生/逆袭/之/路/#/喜茶/#/深圳/#/创业/@/抖音/小/助手  | 2.773092031478882  |
|  hanlp_albert  | 29/岁/喜茶/创始人/聂云宸/登上/深圳/富豪/百/人/榜/，/我们/一起/来/看看/他/的/人生/逆袭/之/路/#/喜茶/#/深圳/#/创业/@/抖音/小/助手  |  5.85502815246582  |





|      函数      |                                                                  结果                                                                 |        import时间        |
|----------------|---------------------------------------------------------------------------------------------------------------------------------------|--------------------|
|   jieba_pack   |   今天/带/大家/到/韩束/工厂/参观/下/，/明晚/20/:/00/常宝妈/直播间/韩束/护肤品/专场/等/你/来/#/带货/ /@/抖音/小/助手/@/DOU/+/小/助手   | 2.277297258377075  |
| baidu_lac_pack |    今天/带/大家/到/韩束/工厂/参观/下/，/明晚/20:00/常宝/妈/直播/间/韩束/护肤品/专场/等你/来/#/带/货/ /@/抖/音/小助手/@/DOU/+/小助手   | 9.158059120178223  |
| baidu_hub_pack |    今天/带/大家/到/韩束/工厂/参观/下/，/明晚20:00/常宝/妈/直播/间/韩束/护肤品/专场/等/你/来/#/带/货/ /@/抖/音/小助手/@/DOU/+/小助手   | 2.303596019744873  |
|  pkuseg_pack   |     今天/带/大家/到/韩束/工厂/参观/下/，/明晚/20:00/常/宝妈/直播间/韩束/护肤品/专场/等/你/来/#/带货/@/抖音/小/助手/@/DOU+/小/助手     | 12.207917928695679 |
|  thulac_pack   | 今天/带/大/家/到/韩束/工厂/参观/下/，/明晚/20/:/00/常/宝妈/直播/间/韩束/护肤品/专场/等/你/来/#/带/货/ /@/抖音/小/助手/@/DOU/+/小/助手 | 2.0897560119628906 |
|     ltp40      |    今天/带/大家/到/韩束/工厂/参观/下/，/明晚/20:00/常宝妈/直播间/韩束/护肤品/专场/等/你/来/#/带/货/@/抖/音/小/助手/@/DOU/+/小/助手    | 13.361646890640259 |
|   hanlp_pku    |    今天/带/大家/到/韩束/工厂/参观/下/，/明晚/20:00/常/宝妈/直播/间/韩束/护肤品/专场/等/你/来/#/带货/ /@/抖音/小/助手/@DOU+/小/助手    | 2.3146560192108154 |
|  hanlp_albert  |    今天/带/大家/到/韩束/工厂/参观/下/，/明晚/20:00/常/宝妈/直播间/韩束/护肤品/专场/等/你/来/#带货/ /@/抖音/小/助手/@/DOU/+/小/助手    | 5.318717956542969  |
